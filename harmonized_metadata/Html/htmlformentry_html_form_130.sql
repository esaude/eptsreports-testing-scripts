-- MySQL dump 10.13  Distrib 8.0.17, for Linux (x86_64)
--
-- Host: localhost    Database: metadata
-- ------------------------------------------------------
-- Server version	8.0.17

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8mb4 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Dumping data for table `htmlformentry_html_form`
--
-- WHERE:  form_id = 130

LOCK TABLES `htmlformentry_html_form` WRITE;
/*!40000 ALTER TABLE `htmlformentry_html_form` DISABLE KEYS */;
INSERT INTO `htmlformentry_html_form` VALUES (32,130,NULL,'<htmlform>\r\n<script type=\"text/javascript\">\r\n\r\njQuery(function() {\r\n	getField(\'levaCamp.value\').change(function(){\r\n		if(getValue(\'levaCamp.value\') == 1065) {\r\n			getField(\'nomeCamp.value\').show();\r\n		} \r\n		else{\r\n			setValue(\'nomeCamp.value\',\'\');\r\n			getField(\'nomeCamp.value\').hide();\r\n		}\r\n	 })\r\n});\r\n	\r\n\r\n	function isSegundaLinha(codedRegime){\r\n		var segundaLinha = [6108,1311,1312,1313,1314,1315,6109,6325,6326,6327,6328,23790,23791,23792,23795,23796,23799,23800,21163,23801,23802,23815];\r\n		var i;\r\n		for (i = 0; i &lt; segundaLinha.length; i++) {\r\n			if(segundaLinha[i]==codedRegime)\r\n				return true;\r\n		}\r\n		return false;\r\n	}\r\n	\r\n	function isPrimeiraLinha(codedRegime){\r\n		var primeiraLinha = [6324,1651,6110,1703,6243,6103,792,1827,6102,6116,6100,6105,6106,6104,23784,23786];\r\n		var i;\r\n		for (i = 0; i &lt; primeiraLinha.length; i++) {\r\n			if(primeiraLinha[i]==codedRegime)\r\n				return true;\r\n		}\r\n		return false;\r\n	}\r\n\r\n	\r\n	//Validações antes de submter\r\n	beforeSubmit.push(function() {	\r\n		\r\n		//Data de proximo levantamento	\r\n		var dataProximoLev = new Date(getValue(\'dataProxima.value\'));\r\n		\r\n		//Data da consulta seleccionada\r\n		var dataConsulta = new Date(getValue(\'dataConsulta.value\'));\r\n\r\n		//Ultimo estadio do paciente\r\n		var lastRegime = parseInt(\"<lookup expression=\"fn.latestObs(1088).valueCoded\"/>\");\r\n		//Estadio Seleccionado\r\n		var selectedRegime = parseInt(getValue(\'regime.value\'));	\r\n		\r\n		//Data de Nascimento	\r\n		var dataNascimento = new Date(Date.parse(\"<lookup expression=\"patient.birthdate\"/>\"));\r\n		\r\n		//Data de inicio de TARV\r\n		var dataInicioTARV = \"<lookup expression=\"fn.latestObs(1190).valueDatetime\"/>\";\r\n		\r\n		var estadoProgramaTarvConceptID = parseInt(\"<lookup expression=\"fn.currentProgramWorkflowStatus(2).state.concept.id\" />\")\r\n\r\n				\r\n		if (isNaN(estadoProgramaTarvConceptID)){			\r\n			getField(\'dataConsulta.error\').html(\'Deve admitir este paciente no programa de TARV - TRATAMENTO\').show();\r\n			return false;			\r\n		}else{\r\n			if(!((estadoProgramaTarvConceptID==6269) || (estadoProgramaTarvConceptID==1369))){\r\n				getField(\'dataConsulta.error\').html(\'Este paciente não está no estado activo no programa, coloque-o como activo primeiro\').show();\r\n				return false;	\r\n			}\r\n		}\r\n		\r\n		\r\n		//Compara se a data de levantamento	e menor que data de nascimento\r\n		if (dataInicioTARV == \'\') {					\r\n				getField(\'dataConsulta.error\').html(\'O Paciente não tem data de inicio de TARV por isso não pode preencher fila\').show();\r\n				return false;		        \r\n		}\r\n		\r\n		//Compara se a data da proxima é menor que a data de levantamento	\r\n		if (dataProximoLev &lt;=  dataConsulta) {					\r\n				getField(\'dataProxima.error\').html(\'A data do proximo levantamento não deve ser menor ou igual que a data de levantamento\').show();\r\n				return false;		        \r\n		}\r\n\r\n		//Compara se a data de levantamento	e menor que data de nascimento\r\n		if (dataConsulta &lt;  dataNascimento) {					\r\n				getField(\'dataConsulta.error\').html(\'A data do levantamento não deve ser menor que a data de nascimento\').show();\r\n				return false;		        \r\n		}		\r\n		\r\n		if (!isNaN(lastRegime)){\r\n			if(isSegundaLinha(lastRegime)){\r\n				if(isPrimeiraLinha(selectedRegime)){\r\n					getField(\'regime.error\').html(\'O úlimo regime do paciente foi da segunda linha, não pode seleccionar um regime da primeira linha\').show();\r\n					return false;	\r\n				}\r\n			}\r\n			\r\n			if(lastRegime != selectedRegime){\r\n				var confirmacao=window.confirm(\'Confirma a mudança de regime deste paciente?\');\r\n				if(confirmacao == false)\r\n				return false;\r\n			}\r\n		}		\r\n				    \r\n		return true;\r\n	});	\r\n	\r\n</script>\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\r\n<title>FILA</title>\r\n	\r\n	<style>\r\n			h2 { border-bottom: 3px solid red; }\r\n			p { border: 1px solid black; }\r\n			table{\r\n				border-color: #600;\r\n				border-width: 0 0 1px 1px;\r\n				border-style: solid;}\r\n\r\n			td{\r\n				border-color: #600;\r\n				border-width: 1px 1px 0 0;\r\n				border-style: solid;\r\n				margin: 0;\r\n				padding: 4px;\r\n				background-color: #B2DFEE;}\r\n			.style1 {\r\n				font-size: 14px;\r\n				font-weight: bold;}\r\n			.section {\r\n				border: 1px solid $headerColor;\r\n				padding: 2px;\r\n				text-align: center;\r\n				margin-bottom: 1em;\r\n				border-width:thin;\r\n				width:50%;\r\n				vertical-align:middle;\r\n				azimuth:center;}\r\n			.sectionHeader {\r\n				background-color: $headerColor;\r\n				color: $fontOnHeaderColor;\r\n				display: block;\r\n				padding: 2px;\r\n				font-weight: bold;}\r\n			table.baseline-aligned td {\r\n				vertical-align: baseline;}\r\n	</style>\r\n</head>\r\n<body>\r\n<table width=\"900\" border=\"1\" align=\"center\">\r\n  <tbody align=\"left\" style=\"font-family:verdana; font-size:12px\">\r\n  <tr>\r\n    <td width=\"285\" rowspan=\"4\">REPÚBLICA DE MOÇAMBIQUE<br/>Serviço Nacional de Saúde</td>\r\n    <td colspan=\"2\"><div align=\"center\" class=\"style1\">Ficha Individual de Levantamento de ARVs (FILA)</div></td>\r\n  </tr>\r\n  <tr>\r\n    <td colspan=\"2\">\r\n     Nº do Livro TARV:<lookup expression=\"fn.latestObs(6264).getValueAsString($!{locale})\"/>   \r\n     Pag: <lookup expression=\"fn.latestObs(6266).getValueAsString($!{locale})\"/>  \r\n     Linha: <lookup expression=\"fn.latestObs(6268).getValueAsString($!{locale})\"/>  \r\n    </td>\r\n    </tr>\r\n  <tr>\r\n    <td width=\"245\"><div align=\"right\">Nome:</div></td>\r\n    <td width=\"348\"><lookup expression=\"patient.personName\"/></td>\r\n  </tr>\r\n  <tr>\r\n    <td><div align=\"right\">Contacto:</div></td>\r\n    <td><lookup expression=\"patient.getAttribute(9)\"/></td>\r\n  </tr>\r\n  <tr>\r\n    <td>NID: <lookup expression=\"patient.getPatientIdentifier(2)\"/>\r\n                    <lookup expression=\"patient.getPatientIdentifier(14)\"/>\r\n\r\n</td>\r\n    <td><div align=\"right\">Endereço:</div></td>\r\n    <td><lookup complexExpression=\"#foreach( $addr in $patient.addresses ) $!addr.subregion #end\"/></td>\r\n  </tr>\r\n  \r\n  </tbody>\r\n</table>\r\n\r\n<br/>\r\n\r\n<table width=\"900\" border=\"1\" align=\"center\">\r\n  <tbody align=\"left\" style=\"font-family:verdana; font-size:12px\">\r\n  \r\n  \r\n  <tr>\r\n    <td><div align=\"right\">Data de Levantamento:</div></td>\r\n    <td><encounterDate id=\"dataConsulta\"/></td>\r\n  </tr>\r\n  <tr>\r\n    <td><div align=\"right\">Provedor:</div></td>\r\n    <td><encounterProvider role=\"Provider\" type=\"autocomplete\"/></td>\r\n  </tr>\r\n  <tr>\r\n    <td><div align=\"right\">Unidade Sanitária:</div></td>\r\n    <td><encounterLocation id=\"localConsulta\" default=\"GlobalProperty:default_location\"/>\r\n	</td>\r\n  </tr>\r\n  <includeIf velocityTest=\"$patient.age >14 \">\r\n  <tr>\r\n    <td width=\"40%\"><div align=\"right\">Medicamentos ARVs:</div></td>\r\n    <td width=\"60%\">Ultimo Regime:\r\n      <strong>\r\n      <lookup expression=\"fn.latestObs(1088).getValueAsString($!{locale})\"/></strong><br />\r\n      <obs id=\"regime\" conceptId=\"1088\" answerConceptIds=\"1703,6100,1651,6324,6243,6104,23784,23786,1311,6108,1314,23790,23791,23792,23793,23795,23796,6329,23797,23798,5424\" labelText=\"\" answerLabels=\"AZT+3TC+EFV,AZT+3TC+LPV/r,AZT+3TC+NVP,TDF+3TC+EFV,TDF+3TC+NVP,ABC+3TC+EFV,TDF+3TC+DTG,ABC+3TC+DTG,ABC+3TC+LPV/r (2ª Linha),TDF+3TC+LPV/r (2ª Linha),AZT+3TC+LPV/r (2ª Linha),TDF+3TC+LPV/r+RTV (2ª Linha),TDF+3TC+ATV/r (2ª Linha),ABC+3TC+ATV/r (2ª Linha),AZT+3TC+ATV/r (2ª Linha),ABC+3TC+ATV/r+RAL (2ª Linha),TDF+3TC+ATV/r+RAL (2ª Linha),TDF+3TC+RAL+DRV/r (3ª Linha),ABC+3TC++RAL+DRV/r (3ª Linha),3TC+RAL+DRV/r (3ª Linha),OUTRO\" required=\"true\"/></td>\r\n  </tr>\r\n  </includeIf>\r\n  \r\n  <excludeIf velocityTest=\"$patient.age >14 \">\r\n  <tr>\r\n    <td width=\"40%\"><div align=\"right\">Medicamentos ARVs:</div></td>\r\n    <td width=\"60%\">Ultimo Regime:\r\n      <strong>\r\n      <lookup expression=\"fn.latestObs(1088).getValueAsString($!{locale})\"/></strong><br />      \r\n      \r\n<obs id=\"regime\" conceptId=\"1088\" answerConceptIds=\"1703,6100,6324,6116,1651,6106,6105,6104,23784,23786,1313,1311,6108,23799,23800,21163,23793,23791,23801,23802,23815,23792,23797,6329,23803,5424\" labelText=\"\" answerLabels=\"AZT+3TC+EFV,AZT+3TC+LPV/r,TDF+3TC+EFV,AZT+3TC+ABC,AZT+3TC+NVP,ABC+3TC+LPV/r,ABC+3TC+NVP,ABC+3TC+EFV,TDF+3TC+DTG,ABC+3TC+DTG,ABC+3TC+EFV (2ª Linha),ABC+3TC+LPV/r (2ª Linha),TDF+3TC+LPV/r (2ª Linha),TDF+3TC+DTG (2ª Linha),ABC+3TC+DTG (2ª Linha),AZT+3TC+LPV/r (2ª Linha),AZT+3TC+ATV/r (2ª Linha),TDF+3TC+ATV/r (2ª Linha),AZT+3TC+RAL (2ª Linha),AZT+3TC+DRV/r (2ª Linha),AZT+3TC+DTG (2ª Linha),ABC+3TC+ATV/r (2ª Linha),ABC+3TC+RAL+DRV/r (3ª Linha),TDF+3TC+RAL+DRV/r (3ª Linha),AZT+3TC+RAL+DRV/r (3ª Linha),OUTRO\" required=\"true\"/>\r\n</td>\r\n  </tr>\r\n  </excludeIf>\r\n  \r\n  <tr>\r\n    <td><div align=\"right\">Quantidade Aviada:</div></td>\r\n    <td><obs id=\"quantidadeAviada\" conceptId=\"1715\" labelText=\"\" answers=\"15,30,45,60,90,120,180\" answerLabels=\"15,30,45,60,90,120,180\"/> - <obs conceptId=\"1715\" labelText=\"Outra:\"/></td>\r\n  </tr>\r\n  <tr>\r\n    <td><div align=\"right\">Dosagem:</div></td>\r\n    <td><obs id=\"posologia\" conceptId=\"1711\" labelText=\"\" answers=\"1-0-1,0-0-1,1-0-0,2-0-2,3-0-3,0-0-3,1-0-2,1-0-1.5\" answerLabels=\"1-0-1,0-0-1,1-0-0,2-0-2,3-0-3,0-0-3,1-0-2,1-0-1.5\"/> - <obs conceptId=\"1711\" labelText=\"Outra:\" size=\"8\"/></td>\r\n  </tr>\r\n  <tr>\r\n    <td><div align=\"right\">Data do próximo Levantamento:</div></td>\r\n    <td><obs id=\"dataProxima\" conceptId=\"5096\" labelText=\"\" allowFutureDates=\"true\" required=\"true\"/></td>\r\n  </tr>\r\n   <tr>\r\n    <td><div align=\"right\">Levantamento efectuado num campo de acomodação?</div></td>\r\n    <td><obs id=\"levaCamp\" conceptId=\"23856\" labelText=\"\" answerConceptIds=\"1065,1066\" answerLabels=\"Sim, Não\"/></td>\r\n  </tr>\r\n  <tr>\r\n    <td><div align=\"right\">Qual é o número do campo?</div></td>\r\n    <td><obs id=\"nomeCamp\" conceptId=\"23857\" labelText=\"\"/></td>\r\n  </tr>\r\n  <tr>\r\n    <td colspan=\"2\"><div align=\"center\">\r\n      <submit submitLabel=\"Submeter\"/>\r\n    </div></td>\r\n  </tr>\r\n  </tbody>\r\n</table>\r\n\r\n</body>\r\n</html>\r\n</htmlform>',13,'2012-05-31 16:33:18',1,'2019-06-04 14:51:19',0,'b30f1085-fc70-4258-aa5f-5c5f3bc2f3b1',NULL,NULL,NULL,NULL);
/*!40000 ALTER TABLE `htmlformentry_html_form` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2019-09-03 10:21:25
