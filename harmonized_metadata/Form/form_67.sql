-- MySQL dump 10.13  Distrib 5.6.40, for Linux (x86_64)
--
-- Host: localhost    Database: openmrs
-- ------------------------------------------------------
-- Server version	5.6.40

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `form`
--

/*!40101 SET character_set_client = "utf8" */;

--
-- Dumping data for table `form`
--
-- WHERE:  form_id=67

LOCK TABLES `form` WRITE;
/*!40000 ALTER TABLE `form` DISABLE KEYS */;
INSERT INTO `form` VALUES (67,'ADULTO: PROCESSO PARTE A - ANAMNESE','1.1',157,1,'Processo de Hospital de Dia 1/2',5,'<?xml version=\"1.0\" encoding=\"UTF-8\"?><?mso-infoPathSolution name=\"ADULTO: PROCESSO PARTE A - ANAMNESE\" href=\"http://10.10.1.11:8080/openmrs/moduleServlet/formentry/forms/67-1.1-157.xsn\" solutionVersion=\"1.1.0.157\" productVersion=\"11.0.6357\" PIVersion=\"1.0.0.0\" ?><?mso-application progid=\"InfoPath.Document\"?><form xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xd=\"http://schemas.microsoft.com/office/infopath/2003\" xmlns:openmrs=\"http://10.10.1.11:8080/openmrs/moduleServlet/formentry/forms/schema/67-157\" id=\"67\" name=\"ADULTO: PROCESSO PARTE A - ANAMNESE\" version=\"1.1\">\n  <header>\n    <enterer>$!{enterer}</enterer>\n    <date_entered>$!{dateEntered}</date_entered>\n    <session>$!{sessionId}</session>\n    <uid>$!{uid}</uid>\n  </header>\n  <patient>\n    <nid openmrs_attribute=\"\" openmrs_table=\"\">$!{patient.getPatientIdentifier().getIdentifier()}</nid>\n    <patient_identify.bi openmrs_attribute=\"\" openmrs_table=\"\">$!{patient.getPatientIdentifier(3).getIdentifier()}</patient_identify.bi>\n    <patient_identify.other openmrs_attribute=\"\" openmrs_table=\"\">$!{patient.getPatientIdentifier(1).getIdentifier()}</patient_identify.other>\n    <patient_attribute.cellphone openmrs_attribute=\"\" openmrs_table=\"\">$!{patient.getAttribute(9).getValue()}</patient_attribute.cellphone>\n    <patient.age openmrs_attribute=\"\" openmrs_table=\"\">$!{patient.getAge()}</patient.age>\n    <patient.birthdate openmrs_attribute=\"birthdate\" openmrs_table=\"patient\">$!{date.format($patient.getBirthdate())}</patient.birthdate>\n    <patient.birthdate_estimated openmrs_attribute=\"birthdate_estimated\" openmrs_table=\"patient\">$!{patient.getBirthDateEstimated()}</patient.birthdate_estimated>\n    <patient.family_name openmrs_attribute=\"family_name\" openmrs_table=\"patient_name\">$!{patient.getFamilyName()}</patient.family_name>\n    <patient.given_name openmrs_attribute=\"given_name\" openmrs_table=\"patient_name\">$!{patient.getGivenName()}</patient.given_name>\n    <patient.medical_record_number openmrs_attribute=\"identifier\" openmrs_table=\"patient_identifier\">$!{patient.getPatientIdentifier(1).getIdentifier()}</patient.medical_record_number>\n    <patient.middle_name openmrs_attribute=\"middle_name\" openmrs_table=\"patient_name\">$!{patient.getMiddleName()}</patient.middle_name>\n    <patient.patient_id openmrs_attribute=\"patient_id\" openmrs_table=\"patient\">$!{patient.getPatientId()}</patient.patient_id>\n    <patient.sex openmrs_attribute=\"gender\" openmrs_table=\"patient\">$!{patient.getGender()}</patient.sex>\n    <patient_address.address1 openmrs_attribute=\"address1\" openmrs_table=\"patient_address\">$!{patient.getPersonAddress().getAddress1()}</patient_address.address1>\n    <casa openmrs_attribute=\"address2\" openmrs_table=\"patient_address\">$!{patient.getPersonAddress().getAddress2()}</casa>\n    <patient_address.city openmrs_attribute=\"city\" openmrs_table=\"patient_address\">$!{patient.getPersonAddress().getCity()}</patient_address.city>\n    <provincia openmrs_attribute=\"state_province\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getStateProvince()}</provincia>\n    <patient_address.postal_code openmrs_attribute=\"postal_code\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getPostalCode()}</patient_address.postal_code>\n    <patient_address.country openmrs_attribute=\"country\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getCountry()}</patient_address.country>\n    <patient_address.longitude openmrs_attribute=\"longitude\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getLongitude()}</patient_address.longitude>\n    <patient_address.latitude openmrs_attribute=\"latitude\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getLatitude()}</patient_address.latitude>\n    <distrito openmrs_attribute=\"county_district\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getCountyDistrict()}</distrito>\n    <celula_quarteirao openmrs_attribute=\"neighborhood_cell\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getNeighborhoodCell()}</celula_quarteirao>\n    <localidade openmrs_attribute=\"region\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getRegion()}</localidade>\n    <bairro openmrs_attribute=\"subregion\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getSubregion()}</bairro>\n    <patient_address.township_division openmrs_attribute=\"township_division\" openmrs_table=\"person_address\">$!{patient.getPersonAddress().getTownshipDivision()}</patient_address.township_division>\n  </patient>\n  <encounter>\n    <encounter.encounter_datetime openmrs_attribute=\"encounter_datetime\" openmrs_table=\"encounter\"/>\n    <encounter.location_id openmrs_attribute=\"location_id\" openmrs_table=\"encounter\"/>\n    <encounter.provider_id openmrs_attribute=\"provider_id\" openmrs_table=\"encounter\"/>\n  </encounter>\n  <obs openmrs_concept=\"1238^MEDICAL RECORD OBSERVATIONS^99DCT\" openmrs_datatype=\"ZZ\">\n    <personal_reference openmrs_concept=\"1609^PERSONAL REFERENCE^99DCT\" openmrs_datatype=\"ZZ\">\n      <personal_reference_-_name openmrs_concept=\"1441^PERSONAL REFERENCE - NAME^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </personal_reference_-_name>\n      <personal_reference_-_surname openmrs_concept=\"1442^PERSONAL REFERENCE - SURNAME^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </personal_reference_-_surname>\n      <personal_reference_-_telephone_number openmrs_concept=\"1611^PERSONAL REFERENCE - TELEPHONE NUMBER^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </personal_reference_-_telephone_number>\n    </personal_reference>\n    <other_personal_information openmrs_concept=\"1657^OTHER PERSONAL INFORMATION^99DCT\" openmrs_datatype=\"ZZ\">\n      <occupation openmrs_concept=\"1459^OCCUPATION^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </occupation>\n      <level_of_education multiple=\"0\" openmrs_concept=\"1443^LEVEL OF EDUCATION^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </level_of_education>\n      <number_of_household_members openmrs_concept=\"1656^NUMBER OF HOUSEHOLD MEMBERS^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </number_of_household_members>\n    </other_personal_information>\n    <civil_information_for_hiv_postitive_patients openmrs_concept=\"1659^CIVIL INFORMATION FOR HIV POSTITIVE PATIENTS^99DCT\" openmrs_datatype=\"ZZ\">\n      <civil_status multiple=\"0\" openmrs_concept=\"1054^CIVIL STATUS^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </civil_status>\n      <number_of_wives openmrs_concept=\"5557^NUMBER OF WIVES^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </number_of_wives>\n      <hiv_status_of_wives multiple=\"0\" openmrs_concept=\"1449^HIV STATUS OF WIVES^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </hiv_status_of_wives>\n      <patient_id_of_hiv_positive_wife openmrs_concept=\"1450^PATIENT ID OF HIV POSITIVE WIFE^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </patient_id_of_hiv_positive_wife>\n      <other_partners openmrs_concept=\"1451^OTHER PARTNERS^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </other_partners>\n      <number_of_children openmrs_concept=\"5573^NUMBER OF CHILDREN^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </number_of_children>\n      <number_of_children_tested_for_hiv openmrs_concept=\"1452^NUMBER OF CHILDREN TESTED FOR HIV^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </number_of_children_tested_for_hiv>\n      <number_of_hiv_positive_children openmrs_concept=\"1453^NUMBER OF HIV POSITIVE CHILDREN^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </number_of_hiv_positive_children>\n      <patient_id_for_hiv_positive_children openmrs_concept=\"1454^PATIENT ID FOR HIV POSITIVE CHILDREN^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </patient_id_for_hiv_positive_children>\n    </civil_information_for_hiv_postitive_patients>\n    <social_status openmrs_concept=\"1660^SOCIAL STATUS^99DCT\" openmrs_datatype=\"ZZ\">\n      <refrigerator_in_home multiple=\"0\" openmrs_concept=\"1455^REFRIGERATOR IN HOME^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </refrigerator_in_home>\n      <home_electricity multiple=\"0\" openmrs_concept=\"5609^HOME ELECTRICITY^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </home_electricity>\n    </social_status>\n    <entry_point_into_hiv_care_set openmrs_concept=\"1625^ENTRY POINT INTO HIV CARE, SET^99DCT\" openmrs_datatype=\"ZZ\">\n      <entry_point_into_hiv_care_referal_type multiple=\"0\" openmrs_concept=\"1594^ENTRY POINT INTO HIV CARE, REFERAL TYPE^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </entry_point_into_hiv_care_referal_type>\n      <entry_point_into_hiv_care_location_name openmrs_concept=\"1626^ENTRY POINT INTO HIV CARE, LOCATION NAME^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </entry_point_into_hiv_care_location_name>\n      <entry_point_into_hiv_care_patient_code_at_location openmrs_concept=\"1627^ENTRY POINT INTO HIV CARE, PATIENT CODE AT LOCATION^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </entry_point_into_hiv_care_patient_code_at_location>\n    </entry_point_into_hiv_care_set>\n    <hiv_diagnostics openmrs_concept=\"1661^HIV DIAGNOSTICS^99DCT\" openmrs_datatype=\"ZZ\">\n      <is_patient_hiv_positive multiple=\"0\" openmrs_concept=\"1634^IS PATIENT HIV POSITIVE^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </is_patient_hiv_positive>\n      <patient_received_counceling multiple=\"0\" openmrs_concept=\"1463^PATIENT RECEIVED COUNCELING^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </patient_received_counceling>\n    </hiv_diagnostics>\n    <patient_received_counceling multiple=\"0\" openmrs_concept=\"1463^PATIENT RECEIVED COUNCELING^99DCT\" openmrs_datatype=\"CWE\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <value xsi:nil=\"true\"/>\n    </patient_received_counceling>\n    <drug_habits multiple=\"1\" openmrs_concept=\"1389^DRUG HABIT(S)^99DCT\" openmrs_datatype=\"CWE\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <tobacco openmrs_concept=\"1388^TOBACCO^99DCT\">false</tobacco>\n        <alcohol_use openmrs_concept=\"1603^ALCOHOL USE^99DCT\">false</alcohol_use>\n        <intravenous_drug_use openmrs_concept=\"105^INTRAVENOUS DRUG USE^99DCT\">false</intravenous_drug_use>\n    </drug_habits>\n    <sexual_preference multiple=\"0\" openmrs_concept=\"1375^SEXUAL PREFERENCE^99DCT\" openmrs_datatype=\"CWE\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <value xsi:nil=\"true\"/>\n    </sexual_preference>\n    <number_of_sexual_partners_in_the_last_3_months multiple=\"0\" openmrs_concept=\"1666^NUMBER OF SEXUAL PARTNERS IN THE LAST 3 MONTHS^99DCT\" openmrs_datatype=\"CWE\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <value xsi:nil=\"true\"/>\n    </number_of_sexual_partners_in_the_last_3_months>\n    <gynacological_history openmrs_concept=\"1393^GYNACOLOGICAL HISTORY^99DCT\" openmrs_datatype=\"ZZ\">\n      <gravida openmrs_concept=\"5624^GRAVIDA^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </gravida>\n      <gpav_para openmrs_concept=\"1392^GPAV PARA^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </gpav_para>\n      <gpav_aborted openmrs_concept=\"1390^GPAV ABORTED^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </gpav_aborted>\n      <gpav_vivos openmrs_concept=\"1391^GPAV VIVOS^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </gpav_vivos>\n      <antecedentes_ginecologicos_outros openmrs_concept=\"1394^GYNECOLOGICAL HISTORY, OTHER^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </antecedentes_ginecologicos_outros>\n      <date_of_last_menstration openmrs_concept=\"1465^DATE OF LAST MENSTRATION^99DCT\" openmrs_datatype=\"DT\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </date_of_last_menstration>\n    </gynacological_history>\n    <obstectric_history openmrs_concept=\"1668^OBSTECTRIC HISTORY^99DCT\" openmrs_datatype=\"ZZ\">\n      <prior_abortion multiple=\"0\" openmrs_concept=\"1667^PRIOR ABORTION^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </prior_abortion>\n      <tratamento_ptv multiple=\"0\" openmrs_concept=\"1466^PMTCT TREATMENT^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </tratamento_ptv>\n      <tratamento_ptv_quais multiple=\"0\" openmrs_concept=\"1467^PMTCT TREATMENT, SPECIFIC^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </tratamento_ptv_quais>\n      <prenatal_arv_medication_mother multiple=\"1\" openmrs_concept=\"1504^PRENATAL ARV MEDICATION, MOTHER^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <nevirapine openmrs_concept=\"631^NEVIRAPINE^99DCT\">false</nevirapine>\n            <zidovudine openmrs_concept=\"797^ZIDOVUDINE^99DCT\">false</zidovudine>\n            <stavudine_lamivudine_nevirapine openmrs_concept=\"792^STAVUDINE + LAMIVUDINE + NEVIRAPINE^99DCT\">false</stavudine_lamivudine_nevirapine>\n            <lamivudine openmrs_concept=\"628^LAMIVUDINE^99DCT\">false</lamivudine>\n            <sulfadoxine_and_pyrimethamine openmrs_concept=\"87^SULFADOXINE AND PYRIMETHAMINE^99DCT\">false</sulfadoxine_and_pyrimethamine>\n            <tarv_treatment openmrs_concept=\"1800^TARV TREATMENT^99DCT\">false</tarv_treatment>\n            <trimethoprim_and_sulfamethoxazole openmrs_concept=\"916^TRIMETHOPRIM AND SULFAMETHOXAZOLE^99DCT\">false</trimethoprim_and_sulfamethoxazole>\n            <zidovudine_nevirapine openmrs_concept=\"1801^ZIDOVUDINE + NEVIRAPINE^99DCT\">false</zidovudine_nevirapine>\n            <none openmrs_concept=\"1107^NONE^99DCT\">false</none>\n            <zidovudine_and_lamivudine openmrs_concept=\"630^ZIDOVUDINE AND LAMIVUDINE^99DCT\">false</zidovudine_and_lamivudine>\n      </prenatal_arv_medication_mother>\n      <number_of_weeks_pregnant openmrs_concept=\"1279^NUMBER OF WEEKS PREGNANT^99DCT\" openmrs_datatype=\"NM\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </number_of_weeks_pregnant>\n      <pregnancy_due_date openmrs_concept=\"1600^PREGNANCY DUE DATE^99DCT\" openmrs_datatype=\"DT\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </pregnancy_due_date>\n      <prior_delivery_date openmrs_concept=\"5599^PRIOR DELIVERY DATE^99DCT\" openmrs_datatype=\"TS\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </prior_delivery_date>\n      <pregant multiple=\"0\" openmrs_concept=\"1982^PREGANT^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </pregant>\n    </obstectric_history>\n    <infant_feeding_method multiple=\"0\" openmrs_concept=\"1151^INFANT FEEDING METHOD^99DCT\" openmrs_datatype=\"CWE\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <value xsi:nil=\"true\"/>\n    </infant_feeding_method>\n    <allergies_to_medicine openmrs_concept=\"1669^ALLERGIES TO MEDICINE^99DCT\" openmrs_datatype=\"ZZ\">\n      <medication_allergy multiple=\"0\" openmrs_concept=\"1601^MEDICATION ALLERGY^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </medication_allergy>\n      <medication_allergies multiple=\"0\" openmrs_concept=\"1605^MEDICATION ALLERGIES^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </medication_allergies>\n      <medication_allergy_specific_non_coded openmrs_concept=\"1517^MEDICATION ALLERGY SPECIFIC NON CODED^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </medication_allergy_specific_non_coded>\n    </allergies_to_medicine>\n    <antiretroviral_use multiple=\"0\" openmrs_concept=\"1192^ANTIRETROVIRAL USE^99DCT\" openmrs_datatype=\"CWE\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <value xsi:nil=\"true\"/>\n    </antiretroviral_use>\n    <previous_antiretroviral_drugs_used_for_treatment multiple=\"0\" openmrs_concept=\"1087^PREVIOUS ANTIRETROVIRAL DRUGS USED FOR TREATMENT^99DCT\" openmrs_datatype=\"CWE\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <value xsi:nil=\"true\"/>\n    </previous_antiretroviral_drugs_used_for_treatment>\n    <adult_clinical_history multiple=\"0\" openmrs_concept=\"1670^ADULT CLINICAL HISTORY^99DCT\" openmrs_datatype=\"CWE\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <value xsi:nil=\"true\"/>\n    </adult_clinical_history>\n    <clinical_history_not_coded openmrs_concept=\"1628^CLINICAL HISTORY, NOT CODED^99DCT\" openmrs_datatype=\"ST\">\n        <date xsi:nil=\"true\"/>\n        <time xsi:nil=\"true\"/>\n        <value xsi:nil=\"true\"/>\n    </clinical_history_not_coded>\n    <hospitalizations openmrs_concept=\"1606^HOSPITALIZATIONS^99DCT\" openmrs_datatype=\"ZZ\">\n      <hospital_slash_clinic openmrs_concept=\"1468^HOSPITAL/CLINIC^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </hospital_slash_clinic>\n      <diagnosis_for_hospitalization openmrs_concept=\"1469^DIAGNOSIS FOR HOSPITALIZATION^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </diagnosis_for_hospitalization>\n      <date_of_hospital_stay_entry openmrs_concept=\"1470^DATE OF HOSPITAL STAY, ENTRY^99DCT\" openmrs_datatype=\"DT\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </date_of_hospital_stay_entry>\n      <data_of_hospital_stay_exit openmrs_concept=\"1722^DATA OF HOSPITAL STAY, EXIT^99DCT\" openmrs_datatype=\"DT\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </data_of_hospital_stay_exit>\n      <hosptal_treatment openmrs_concept=\"1471^HOSPTAL TREATMENT^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </hosptal_treatment>\n    </hospitalizations>\n    <hiv_exposure_adult_set openmrs_concept=\"1688^HIV EXPOSURE ADULT, SET^99DCT\" openmrs_datatype=\"ZZ\">\n      <hiv_exposure_through_surgery multiple=\"0\" openmrs_concept=\"1685^HIV EXPOSURE THROUGH SURGERY^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </hiv_exposure_through_surgery>\n      <description_of_surgical_intervention openmrs_concept=\"1473^DESCRIPTION OF SURGICAL INTERVENTION^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </description_of_surgical_intervention>\n      <hiv_exposure_through_blood_transfusion multiple=\"0\" openmrs_concept=\"1686^HIV EXPOSURE THROUGH BLOOD TRANSFUSION^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </hiv_exposure_through_blood_transfusion>\n      <hiv_exposure_through_accident multiple=\"0\" openmrs_concept=\"1687^HIV EXPOSURE THROUGH ACCIDENT^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </hiv_exposure_through_accident>\n      <description_of_accident openmrs_concept=\"1435^DESCRIPTION OF ACCIDENT^99DCT\" openmrs_datatype=\"ST\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <value xsi:nil=\"true\"/>\n      </description_of_accident>\n      <method_of_hiv_exposure multiple=\"1\" openmrs_concept=\"1061^METHOD OF HIV EXPOSURE^99DCT\" openmrs_datatype=\"CWE\">\n            <date xsi:nil=\"true\"/>\n            <time xsi:nil=\"true\"/>\n            <suspected_past_hiv_exposure openmrs_concept=\"1062^SUSPECTED PAST HIV EXPOSURE^99DCT\">false</suspected_past_hiv_exposure>\n            <blood_transfusion openmrs_concept=\"1063^BLOOD TRANSFUSION^99DCT\">false</blood_transfusion>\n            <spouses_partner_suspected_hiv openmrs_concept=\"5564^SPOUSES PARTNER SUSPECTED HIV+^99DCT\">false</spouses_partner_suspected_hiv>\n            <contaminated_needle_stick openmrs_concept=\"181^CONTAMINATED NEEDLE STICK^99DCT\">false</contaminated_needle_stick>\n            <intravenous_drug_use openmrs_concept=\"105^INTRAVENOUS DRUG USE^99DCT\">false</intravenous_drug_use>\n            <other_non-coded openmrs_concept=\"5622^OTHER NON-CODED^99DCT\">false</other_non-coded>\n            <unknown openmrs_concept=\"1067^UNKNOWN^99DCT\">false</unknown>\n            <injections openmrs_concept=\"1507^INJECTIONS^99DCT\">false</injections>\n            <surgical_intervention openmrs_concept=\"1472^SURGICAL INTERVENTION^99DCT\">false</surgical_intervention>\n            <dental_extraction openmrs_concept=\"1508^DENTAL EXTRACTION^99DCT\">false</dental_extraction>\n            <scarrification openmrs_concept=\"1509^SCARRIFICATION^99DCT\">false</scarrification>\n            <accidental_exposure openmrs_concept=\"1433^ACCIDENTAL EXPOSURE^99DCT\">false</accidental_exposure>\n      </method_of_hiv_exposure>\n    </hiv_exposure_adult_set>\n  </obs>\n  <other/></form>','<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\r\n<!--\r\nOpenMRS FormEntry Form HL7 Translation\r\n\r\nThis XSLT is used to translate OpenMRS forms from XML into HL7 2.5 format\r\n\r\n@author Burke Mamlin, MD\r\n@author Ben Wolfe\r\n@version 1.9.7\r\n\r\n1.9.7 - moved encounter/encounter.encounter_id to use PV1-19 instead\r\n1.9.6 - added encounter/encounter.encounter_id to PV1-1\r\n1.9.5 - allow for organizing sections under \"obs\" section\r\n1.9.4 - add support for message uid (as HL7 control id) and transform of patient.health_center to Discharge to Location (PV1-37)\r\n1.9.3 - fixed rounding error on timestamp (tenths of seconds getting rounded up, causing \"60\" seconds in some cases) \r\n1.9.2 - first generally useful version\r\n-->\r\n\r\n<xsl:stylesheet version=\"2.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:fn=\"http://www.w3.org/2005/xpath-functions\" xmlns:xdt=\"http://www.w3.org/2005/xpath-datatypes\">\r\n	<xsl:output method=\"text\" version=\"1.0\" encoding=\"UTF-8\" indent=\"no\"/>\r\n\r\n<xsl:variable name=\"SENDING-APPLICATION\">FORMENTRY</xsl:variable>\r\n<xsl:variable name=\"SENDING-FACILITY\">AMRS.ELD</xsl:variable>\r\n<xsl:variable name=\"RECEIVING-APPLICATION\">HL7LISTENER</xsl:variable>\r\n<xsl:variable name=\"RECEIVING-FACILITY\">AMRS.ELD</xsl:variable>\r\n<xsl:variable name=\"PATIENT-AUTHORITY\"></xsl:variable> <!-- leave blank for internal id, max 20 characters -->\r\n                                                       <!-- for now, must match patient_identifier_type.name -->\r\n<xsl:variable name=\"FORM-AUTHORITY\">AMRS.ELD.FORMID</xsl:variable> <!-- max 20 characters -->\r\n\r\n<xsl:template match=\"/\">\r\n	<xsl:apply-templates />\r\n</xsl:template>\r\n\r\n<!-- Form template -->\r\n<xsl:template match=\"form\">\r\n	<!-- MSH Header -->\r\n	<xsl:text>MSH|^~\\&amp;</xsl:text>   <!-- Message header, field separator, and encoding characters -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-3 Sending application -->\r\n	<xsl:value-of select=\"$SENDING-APPLICATION\" />\r\n	<xsl:text>|</xsl:text>              <!-- MSH-4 Sending facility -->\r\n	<xsl:value-of select=\"$SENDING-FACILITY\" />\r\n	<xsl:text>|</xsl:text>              <!-- MSH-5 Receiving application -->\r\n	<xsl:value-of select=\"$RECEIVING-APPLICATION\" />\r\n	<xsl:text>|</xsl:text>              <!-- MSH-6 Receiving facility -->\r\n	<xsl:value-of select=\"$RECEIVING-FACILITY\" />\r\n	<xsl:text>|</xsl:text>              <!-- MSH-7 Date/time message sent -->\r\n	<xsl:call-template name=\"hl7Timestamp\">\r\n		<xsl:with-param name=\"date\" select=\"current-dateTime()\" />\r\n	</xsl:call-template>\r\n	<xsl:text>|</xsl:text>              <!-- MSH-8 Security -->\r\n	<xsl:text>|ORU^R01</xsl:text>       <!-- MSH-9 Message type ^ Event type (observation report unsolicited) -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-10 Message control ID -->\r\n	<xsl:choose>\r\n		<xsl:when test=\"header/uid\">\r\n			<xsl:value-of select=\"header/uid\" />\r\n		</xsl:when>\r\n		<xsl:otherwise>\r\n			<xsl:value-of select=\"patient/patient.patient_id\" />\r\n			<xsl:call-template name=\"hl7Timestamp\">\r\n				<xsl:with-param name=\"date\" select=\"current-dateTime()\" />\r\n			</xsl:call-template>\r\n		</xsl:otherwise>\r\n	</xsl:choose>\r\n	<xsl:text>|P</xsl:text>             <!-- MSH-11 Processing ID -->\r\n	<xsl:text>|2.5</xsl:text>           <!-- MSH-12 HL7 version -->\r\n	<xsl:text>|1</xsl:text>             <!-- MSH-13 Message sequence number -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-14 Continuation Pointer -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-15 Accept Acknowledgement Type -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-16 Application Acknowledgement Type -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-17 Country Code -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-18 Character Set -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-19 Principal Language of Message -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-20 Alternate Character Set Handling Scheme -->\r\n	<xsl:text>|</xsl:text>              <!-- MSH-21 Message Profile Identifier -->\r\n	<xsl:value-of select=\"@id\" />\r\n	<xsl:text>^</xsl:text>\r\n	<xsl:value-of select=\"$FORM-AUTHORITY\" />\r\n	<xsl:text>&#x000d;</xsl:text>\r\n\r\n	<!-- PID header -->\r\n	<xsl:text>PID</xsl:text>            <!-- Message type -->\r\n	<xsl:text>|</xsl:text>              <!-- PID-1 Set ID -->\r\n	<xsl:text>|</xsl:text>              <!-- PID-2 (deprecated) Patient ID -->\r\n	<xsl:text>|</xsl:text>              <!-- PID-3 Patient Identifier List -->\r\n	<xsl:call-template name=\"patient_id\">\r\n		<xsl:with-param name=\"pid\" select=\"patient/patient.patient_id\" />\r\n		<xsl:with-param name=\"auth\" select=\"$PATIENT-AUTHORITY\" />\r\n		<xsl:with-param name=\"type\" select=\"L\" />\r\n	</xsl:call-template>\r\n	<xsl:if test=\"patient/patient.previous_mrn and string-length(patient/patient.previous_mrn) > 0\">\r\n		<xsl:text>~</xsl:text>\r\n		<xsl:call-template name=\"patient_id\">\r\n			<xsl:with-param name=\"pid\" select=\"patient/patient.previous_mrn\" />\r\n			<xsl:with-param name=\"auth\" select=\"$PATIENT-AUTHORITY\" />\r\n			<xsl:with-param name=\"type\" select=\"PRIOR\" />\r\n		</xsl:call-template>\r\n	</xsl:if>\r\n	<!-- Additional patient identifiers -->\r\n	<!-- This example is for an MTCT-PLUS identifier used in the AMPATH project in Kenya (skipped if not present) -->\r\n	<xsl:if test=\"patient/patient.mtctplus_id and string-length(patient/patient.mtctplus_id) > 0\">\r\n		<xsl:text>~</xsl:text>\r\n		<xsl:call-template name=\"patient_id\">\r\n			<xsl:with-param name=\"pid\" select=\"patient/patient.mtctplus_id\" />\r\n			<xsl:with-param name=\"auth\" select=\"$PATIENT-AUTHORITY\" />\r\n			<xsl:with-param name=\"type\" select=\"MTCTPLUS\" />\r\n		</xsl:call-template>\r\n	</xsl:if>\r\n	<xsl:text>|</xsl:text>              <!-- PID-4 (deprecated) Alternate patient ID -->\r\n	<!-- PID-5 Patient name -->\r\n	<xsl:text>|</xsl:text>              <!-- Family name -->\r\n	<xsl:value-of select=\"patient/patient.family_name\" />\r\n	<xsl:text>^</xsl:text>              <!-- Given name -->\r\n	<xsl:value-of select=\"patient/patient.given_name\" />\r\n	<xsl:text>^</xsl:text>              <!-- Middle name -->\r\n	<xsl:value-of select=\"patient/patient.middle_name\" />\r\n	<xsl:text>|</xsl:text>              <!-- PID-6 Mother\'s maiden name -->\r\n	<xsl:text>|</xsl:text>              <!-- PID-7 Date/Time of Birth -->\r\n	<xsl:value-of select=\"patient/patient.date_of_birth\" />\r\n	<xsl:text>&#x000d;</xsl:text>       <!-- new line -->\r\n	\r\n	<!-- PV1 header -->\r\n	<xsl:text>PV1</xsl:text>            <!-- Message type -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-1 Sub ID -->\r\n	<xsl:text>|O</xsl:text>             <!-- PV1-2 Patient class (O = outpatient) -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-3 Patient location -->\r\n	<xsl:value-of select=\"encounter/encounter.location_id\" />\r\n	<xsl:text>|</xsl:text>              <!-- PV1-4 Admission type (2 = return) -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-5 Pre-Admin Number -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-6 Prior Patient Location -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-7 Attending Doctor -->\r\n	<xsl:value-of select=\"encounter/encounter.provider_id\" />\r\n	<xsl:text>|</xsl:text>              <!-- PV1-8 Referring Doctor -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-9 Consulting Doctor -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-10 Hospital Service -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-11 Temporary Location -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-12 Preadmin Test Indicator -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-13 Re-adminssion Indicator -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-14 Admit Source -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-15 Ambulatory Status -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-16 VIP Indicator -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-17 Admitting Doctor -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-18 Patient Type -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-19 Visit Number -->\r\n	<xsl:value-of select=\"encounter/encounter.encounter_id\" />\r\n	<xsl:text>|</xsl:text>              <!-- PV1-20 Financial Class -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-21 Charge Price Indicator -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-22 Courtesy Code -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-23 Credit Rating -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-24 Contract Code -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-25 Contract Effective Date -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-26 Contract Amount -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-27 Contract Period -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-28 Interest Code -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-29 Transfer to Bad Debt Code -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-30 Transfer to Bad Debt Date -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-31 Bad Debt Agency Code -->\r\n  <xsl:text>|</xsl:text>              <!-- PV1-31 Bad Debt Transfer Amount -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-33 Bad Debt Recovery Amount -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-34 Delete Account Indicator -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-35 Delete Account Date -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-36 Discharge Disposition -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-37 Discharge To Location -->\r\n	<xsl:if test=\"patient/patient.health_center\">\r\n		<xsl:value-of select=\"replace(patient/patient.health_center,\'\\^\',\'&amp;\')\" />\r\n	</xsl:if>\r\n	<xsl:text>|</xsl:text>              <!-- PV1-38 Diet Type -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-39 Servicing Facility -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-40 Bed Status -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-41 Account Status -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-42 Pending Location -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-43 Prior Temporary Location -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-44 Admit Date/Time -->\r\n	<xsl:call-template name=\"hl7Date\">\r\n		<xsl:with-param name=\"date\" select=\"encounter/encounter.encounter_datetime\" />\r\n	</xsl:call-template>\r\n	<xsl:text>|</xsl:text>              <!-- PV1-45 Discharge Date/Time -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-46 Current Patient Balance -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-47 Total Charges -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-48 Total Adjustments -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-49 Total Payments -->\r\n	<xsl:text>|</xsl:text>              <!-- PV1-50 Alternate Visit ID -->\r\n	<xsl:text>|V</xsl:text>             <!-- PV1-51 Visit Indicator -->\r\n	<xsl:text>&#x000d;</xsl:text>       <!-- new line -->\r\n\r\n	<!-- We use encounter date as the timestamp for each observation -->\r\n	<xsl:variable name=\"encounterTimestamp\">\r\n		<xsl:call-template name=\"hl7Date\">\r\n			<xsl:with-param name=\"date\" select=\"encounter/encounter.encounter_datetime\" />\r\n		</xsl:call-template>\r\n	</xsl:variable>\r\n	\r\n	<!-- ORC Common Order Segment -->\r\n	<xsl:text>ORC</xsl:text>            <!-- Message type -->\r\n	<xsl:text>|RE</xsl:text>            <!-- ORC-1 Order Control (RE = obs to follow) -->\r\n	<xsl:text>|</xsl:text>              <!-- ORC-2 Placer Order Number -->\r\n	<xsl:text>|</xsl:text>              <!-- ORC-3 Filler Order Number -->\r\n	<xsl:text>|</xsl:text>              <!-- ORC-4 Placer Group Number -->\r\n	<xsl:text>|</xsl:text>              <!-- ORC-5 Order Status -->\r\n	<xsl:text>|</xsl:text>              <!-- ORC-6 Response Flag -->\r\n	<xsl:text>|</xsl:text>              <!-- ORC-7 Quantity/Timing -->\r\n	<xsl:text>|</xsl:text>              <!-- ORC-8 Parent -->\r\n	<xsl:text>|</xsl:text>              <!-- ORC-9 Date/Time of Transaction -->\r\n	<xsl:call-template name=\"hl7Timestamp\">\r\n		<xsl:with-param name=\"date\" select=\"xs:dateTime(header/date_entered)\" />\r\n	</xsl:call-template>\r\n	<xsl:text>|</xsl:text>              <!-- ORC-10 Entered By -->\r\n	<xsl:value-of select=\"header/enterer\" />\r\n	<xsl:text>&#x000d;</xsl:text>       <!-- new line -->\r\n\r\n	<!-- Observation(s) -->\r\n	<!-- <xsl:variable name=\"obsList\" select=\"obs/*[(@openmrs_concept and value and value/text() != \'\') or *[@openmrs_concept and text()=\'true\']]\" /> -->\r\n	<xsl:variable name=\"obsList\" select=\"obs/*[(@openmrs_concept and value and value/text() != \'\') or *[@openmrs_concept and text()=\'true\']]|obs/*[not(@openmrs_concept)]/*[(@openmrs_concept and value and value/text() != \'\') or *[@openmrs_concept and text()=\'true\']]\" />\r\n	<xsl:variable name=\"obsListCount\" select=\"count($obsList)\" as=\"xs:integer\" />\r\n	<!-- Observation OBR -->\r\n	<xsl:text>OBR</xsl:text>            <!-- Message type -->\r\n	<xsl:text>|</xsl:text>              <!-- OBR-1 Set ID -->\r\n	<xsl:text>1</xsl:text>\r\n	<xsl:text>|</xsl:text>              <!-- OBR-2 Placer order number -->\r\n	<xsl:text>|</xsl:text>              <!-- OBR-3 Filler order number -->\r\n	<xsl:text>|</xsl:text>              <!-- OBR-4 OBR concept -->\r\n	<xsl:value-of select=\"obs/@openmrs_concept\" />\r\n	<xsl:text>&#x000d;</xsl:text>       <!-- new line -->\r\n\r\n	<!-- observation OBXs -->\r\n	<xsl:for-each select=\"$obsList\">\r\n		<xsl:choose>\r\n			<xsl:when test=\"value\">\r\n				<xsl:call-template name=\"obsObx\">\r\n					<xsl:with-param name=\"setId\" select=\"position()\" />\r\n					<xsl:with-param name=\"datatype\" select=\"@openmrs_datatype\" />\r\n					<xsl:with-param name=\"units\" select=\"@openmrs_units\" />\r\n					<xsl:with-param name=\"concept\" select=\"@openmrs_concept\" />\r\n					<xsl:with-param name=\"date\" select=\"date/text()\" />\r\n					<xsl:with-param name=\"time\" select=\"time/text()\" />\r\n					<xsl:with-param name=\"value\" select=\"value\" />\r\n					<xsl:with-param name=\"encounterTimestamp\" select=\"$encounterTimestamp\" />\r\n				</xsl:call-template>\r\n			</xsl:when>\r\n			<xsl:otherwise>\r\n				<xsl:variable name=\"setId\" select=\"position()\" />\r\n				<xsl:for-each select=\"*[@openmrs_concept and text() = \'true\']\">\r\n					<xsl:call-template name=\"obsObx\">\r\n						<xsl:with-param name=\"setId\" select=\"$setId\" />\r\n						<xsl:with-param name=\"subId\" select=\"concat($setId,position())\" />\r\n						<xsl:with-param name=\"datatype\" select=\"../@openmrs_datatype\" />\r\n						<xsl:with-param name=\"units\" select=\"../@openmrs_units\" />\r\n						<xsl:with-param name=\"concept\" select=\"../@openmrs_concept\" />\r\n						<xsl:with-param name=\"date\" select=\"../date/text()\" />\r\n						<xsl:with-param name=\"time\" select=\"../time/text()\" />\r\n						<xsl:with-param name=\"value\" select=\"@openmrs_concept\" />\r\n						<xsl:with-param name=\"encounterTimestamp\" select=\"$encounterTimestamp\" />\r\n					</xsl:call-template>\r\n				</xsl:for-each>\r\n			</xsl:otherwise>\r\n		</xsl:choose>\r\n	</xsl:for-each>\r\n	\r\n	<!-- Grouped observation(s) -->\r\n	<!-- <xsl:variable name=\"obsGroupList\" select=\"obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != \'\') or *[@openmrs_concept and text()=\'true\']]]\" /> -->\r\n	<xsl:variable name=\"obsGroupList\" select=\"obs/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != \'\') or *[@openmrs_concept and text()=\'true\']]]|obs/*[not(@openmrs_concept)]/*[@openmrs_concept and not(date) and *[(@openmrs_concept and value and value/text() != \'\') or *[@openmrs_concept and text()=\'true\']]]\" />\r\n	<xsl:variable name=\"obsGroupListCount\" select=\"count($obsGroupList)\" as=\"xs:integer\" />\r\n	<xsl:for-each select=\"$obsGroupList\">\r\n		<!-- Observation OBR -->\r\n		<xsl:text>OBR</xsl:text>            <!-- Message type -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-1 Set ID -->\r\n		<xsl:value-of select=\"$obsListCount + position()\" />\r\n		<xsl:text>|</xsl:text>              <!-- OBR-2 Placer order number -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-3 Filler order number -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-4 OBR concept -->\r\n		<xsl:value-of select=\"@openmrs_concept\" />\r\n		<xsl:text>&#x000d;</xsl:text>       <!-- new line -->\r\n		\r\n		<!-- Generate OBXs -->\r\n		<xsl:for-each select=\"*[(@openmrs_concept and value and value/text() != \'\') or *[@openmrs_concept and text()=\'true\']]\">\r\n			<xsl:choose>\r\n				<xsl:when test=\"value\">\r\n					<xsl:call-template name=\"obsObx\">\r\n						<xsl:with-param name=\"setId\" select=\"position()\" />\r\n						<xsl:with-param name=\"subId\" select=\"1\" />\r\n						<xsl:with-param name=\"datatype\" select=\"@openmrs_datatype\" />\r\n						<xsl:with-param name=\"units\" select=\"@openmrs_units\" />\r\n						<xsl:with-param name=\"concept\" select=\"@openmrs_concept\" />\r\n						<xsl:with-param name=\"date\" select=\"date/text()\" />\r\n						<xsl:with-param name=\"time\" select=\"time/text()\" />\r\n						<xsl:with-param name=\"value\" select=\"value\" />\r\n						<xsl:with-param name=\"encounterTimestamp\" select=\"$encounterTimestamp\" />\r\n					</xsl:call-template>\r\n				</xsl:when>\r\n				<xsl:otherwise>\r\n					<xsl:variable name=\"setId\" select=\"position()\" />\r\n					<xsl:for-each select=\"*[@openmrs_concept and text() = \'true\']\">\r\n						<xsl:call-template name=\"obsObx\">\r\n							<xsl:with-param name=\"setId\" select=\"$setId\" />\r\n							<xsl:with-param name=\"subId\" select=\"concat(\'1.\',position())\" />\r\n							<xsl:with-param name=\"datatype\" select=\"../@openmrs_datatype\" />\r\n							<xsl:with-param name=\"units\" select=\"../@openmrs_units\" />\r\n							<xsl:with-param name=\"concept\" select=\"../@openmrs_concept\" />\r\n							<xsl:with-param name=\"date\" select=\"../date/text()\" />\r\n							<xsl:with-param name=\"time\" select=\"../time/text()\" />\r\n							<xsl:with-param name=\"value\" select=\"@openmrs_concept\" />\r\n							<xsl:with-param name=\"encounterTimestamp\" select=\"$encounterTimestamp\" />\r\n						</xsl:call-template>\r\n					</xsl:for-each>\r\n				</xsl:otherwise>\r\n			</xsl:choose>\r\n		</xsl:for-each>\r\n	</xsl:for-each>\r\n\r\n	<!-- Problem list(s) -->\r\n	<xsl:variable name=\"problemList\" select=\"problem_list/*[value[text() != \'\']]\" />\r\n	<xsl:variable name=\"problemListCount\" select=\"count($problemList)\" as=\"xs:integer\" />\r\n	<xsl:if test=\"$problemList\">\r\n		<!-- Problem list OBR -->\r\n		<xsl:text>OBR</xsl:text>            <!-- Message type -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-1 Set ID -->\r\n		<xsl:value-of select=\"$obsListCount + $obsGroupListCount + 1\" />\r\n		<xsl:text>|</xsl:text>              <!-- OBR-2 Placer order number -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-3 Filler order number -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-4 OBR concept -->\r\n		<xsl:value-of select=\"problem_list/@openmrs_concept\" />\r\n		<xsl:text>&#x000d;</xsl:text>       <!-- new line -->\r\n\r\n		<!-- Problem list OBXs -->\r\n		<xsl:for-each select=\"$problemList\">\r\n			<xsl:call-template name=\"obsObx\">\r\n				<xsl:with-param name=\"setId\" select=\"position()\" />\r\n				<xsl:with-param name=\"datatype\" select=\"\'CWE\'\" />\r\n				<xsl:with-param name=\"concept\" select=\"@openmrs_concept\" />\r\n				<xsl:with-param name=\"date\" select=\"date/text()\" />\r\n				<xsl:with-param name=\"time\" select=\"time/text()\" />\r\n				<xsl:with-param name=\"value\" select=\"value\" />\r\n				<xsl:with-param name=\"encounterTimestamp\" select=\"$encounterTimestamp\" />\r\n			</xsl:call-template>		\r\n		</xsl:for-each>\r\n	</xsl:if>\r\n	\r\n	<!-- Orders -->\r\n	<xsl:variable name=\"orderList\" select=\"orders/*[*[@openmrs_concept and ((value and value/text() != \'\') or *[@openmrs_concept and text() = \'true\'])]]\" />\r\n	<xsl:variable name=\"orderListCount\" select=\"count($orderList)\" as=\"xs:integer\" />\r\n	<xsl:for-each select=\"$orderList\">\r\n		<!-- Order section OBR -->\r\n		<xsl:text>OBR</xsl:text>            <!-- Message type -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-1 Set ID -->\r\n		<xsl:value-of select=\"$obsListCount + $obsGroupListCount + $problemListCount + 1\" />\r\n		<xsl:text>|</xsl:text>              <!-- OBR-2 Placer order number -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-3 Filler order number -->\r\n		<xsl:text>|</xsl:text>              <!-- OBR-4 OBR concept -->\r\n		<xsl:value-of select=\"@openmrs_concept\" />\r\n		<xsl:text>&#x000d;</xsl:text>       <!-- new line -->\r\n	\r\n		<!-- Order OBXs -->\r\n		<xsl:for-each select=\"*[@openmrs_concept and ((value and value/text() != \'\') or *[@openmrs_concept and text() = \'true\'])]\">\r\n			<xsl:choose>\r\n				<xsl:when test=\"value\">\r\n					<xsl:call-template name=\"obsObx\">\r\n						<xsl:with-param name=\"setId\" select=\"position()\" />\r\n						<xsl:with-param name=\"datatype\" select=\"@openmrs_datatype\" />\r\n						<xsl:with-param name=\"units\" select=\"@openmrs_units\" />\r\n						<xsl:with-param name=\"concept\" select=\"@openmrs_concept\" />\r\n						<xsl:with-param name=\"date\" select=\"date/text()\" />\r\n						<xsl:with-param name=\"time\" select=\"time/text()\" />\r\n						<xsl:with-param name=\"value\" select=\"value\" />\r\n						<xsl:with-param name=\"encounterTimestamp\" select=\"$encounterTimestamp\" />\r\n					</xsl:call-template>\r\n				</xsl:when>\r\n				<xsl:otherwise>\r\n					<xsl:variable name=\"setId\" select=\"position()\" />\r\n					<xsl:for-each select=\"*[@openmrs_concept and text() = \'true\']\">\r\n						<xsl:call-template name=\"obsObx\">\r\n							<xsl:with-param name=\"setId\" select=\"$setId\" />\r\n							<xsl:with-param name=\"subId\" select=\"position()\" />\r\n							<xsl:with-param name=\"datatype\" select=\"../@openmrs_datatype\" />\r\n							<xsl:with-param name=\"units\" select=\"../@openmrs_units\" />\r\n							<xsl:with-param name=\"concept\" select=\"../@openmrs_concept\" />\r\n							<xsl:with-param name=\"date\" select=\"../date/text()\" />\r\n							<xsl:with-param name=\"time\" select=\"../time/text()\" />\r\n							<xsl:with-param name=\"value\" select=\"@openmrs_concept\" />\r\n							<xsl:with-param name=\"encounterTimestamp\" select=\"$encounterTimestamp\" />\r\n						</xsl:call-template>\r\n					</xsl:for-each>\r\n				</xsl:otherwise>\r\n			</xsl:choose>\r\n		</xsl:for-each>	\r\n	</xsl:for-each>\r\n	\r\n</xsl:template>\r\n\r\n<!-- Patient Identifier (CX) generator -->\r\n<xsl:template name=\"patient_id\">\r\n	<xsl:param name=\"pid\" />\r\n	<xsl:param name=\"auth\" />\r\n	<xsl:param name=\"type\" />\r\n	<xsl:value-of select=\"$pid\" />\r\n	<xsl:text>^</xsl:text>              <!-- Check digit -->\r\n	<xsl:text>^</xsl:text>              <!-- Check Digit Scheme -->\r\n	<xsl:text>^</xsl:text>              <!-- Assigning Authority -->\r\n	<xsl:value-of select=\"$auth\" />\r\n	<xsl:text>^</xsl:text>              <!-- Identifier Type -->\r\n	<xsl:value-of select=\"$type\" />\r\n</xsl:template>\r\n\r\n<!-- OBX Generator -->\r\n<xsl:template name=\"obsObx\">\r\n	<xsl:param name=\"setId\" required=\"no\"></xsl:param>\r\n	<xsl:param name=\"subId\" required=\"no\"></xsl:param>\r\n	<xsl:param name=\"datatype\" required=\"yes\" />\r\n	<xsl:param name=\"concept\" required=\"yes\" />\r\n	<xsl:param name=\"date\" required=\"no\"></xsl:param>\r\n	<xsl:param name=\"time\" required=\"no\"></xsl:param>\r\n	<xsl:param name=\"value\" required=\"no\"></xsl:param>\r\n	<xsl:param name=\"units\" required=\"no\"></xsl:param>\r\n	<xsl:param name=\"encounterTimestamp\" required=\"yes\" />\r\n	<xsl:text>OBX</xsl:text>                     <!-- Message type -->\r\n	<xsl:text>|</xsl:text>                       <!-- Set ID -->\r\n	<xsl:value-of select=\"$setId\" />\r\n	<xsl:text>|</xsl:text>                       <!-- Observation datatype -->\r\n	<xsl:choose>\r\n		<xsl:when test=\"$datatype = \'BIT\'\">\r\n			<xsl:text>NM</xsl:text>\r\n		</xsl:when>\r\n		<xsl:otherwise>\r\n			<xsl:value-of select=\"$datatype\" />\r\n		</xsl:otherwise>\r\n	</xsl:choose>\r\n	<xsl:text>|</xsl:text>                       <!-- Concept (what was observed -->\r\n	<xsl:value-of select=\"$concept\" />\r\n	<xsl:text>|</xsl:text>                       <!-- Sub-ID -->\r\n	<xsl:value-of select=\"$subId\" />\r\n	<xsl:text>|</xsl:text>                       <!-- Value -->\r\n	<xsl:choose>\r\n		<xsl:when test=\"$datatype = \'TS\'\">\r\n			<xsl:call-template name=\"hl7Timestamp\">\r\n				<xsl:with-param name=\"date\" select=\"$value\" />\r\n			</xsl:call-template>\r\n		</xsl:when>\r\n		<xsl:when test=\"$datatype = \'DT\'\">\r\n			<xsl:call-template name=\"hl7Date\">\r\n				<xsl:with-param name=\"date\" select=\"$value\" />\r\n			</xsl:call-template>\r\n		</xsl:when>\r\n		<xsl:when test=\"$datatype = \'TM\'\">\r\n			<xsl:call-template name=\"hl7Time\">\r\n				<xsl:with-param name=\"time\" select=\"$value\" />\r\n			</xsl:call-template>\r\n		</xsl:when>\r\n		<xsl:when test=\"$datatype = \'BIT\'\">\r\n			<xsl:choose>\r\n				<xsl:when test=\"$value = \'0\' or upper-case($value) = \'FALSE\'\">0</xsl:when>\r\n				<xsl:otherwise>1</xsl:otherwise>\r\n			</xsl:choose>\r\n		</xsl:when>\r\n		<xsl:otherwise>\r\n			<xsl:value-of select=\"$value\" />\r\n		</xsl:otherwise>\r\n	</xsl:choose>\r\n	<xsl:text>|</xsl:text>                       <!-- Units -->\r\n	<xsl:value-of select=\"$units\" />\r\n	<xsl:text>|</xsl:text>                       <!-- Reference range -->\r\n	<xsl:text>|</xsl:text>                       <!-- Abnormal flags -->\r\n	<xsl:text>|</xsl:text>                       <!-- Probability -->\r\n	<xsl:text>|</xsl:text>                       <!-- Nature of abnormal test -->\r\n	<xsl:text>|</xsl:text>                       <!-- Observation result status -->\r\n	<xsl:text>|</xsl:text>                       <!-- Effective date -->\r\n	<xsl:text>|</xsl:text>                       <!-- User defined access checks -->\r\n	<xsl:text>|</xsl:text>                       <!-- Date time of observation -->\r\n	<xsl:choose>\r\n		<xsl:when test=\"$date and $time\">\r\n			<xsl:call-template name=\"hl7Timestamp\">\r\n				<xsl:with-param name=\"date\" select=\"dateTime($date,$time)\" />\r\n			</xsl:call-template>\r\n		</xsl:when>\r\n		<xsl:when test=\"$date\">\r\n			<xsl:call-template name=\"hl7Date\">\r\n				<xsl:with-param name=\"date\" select=\"$date\" />\r\n			</xsl:call-template>\r\n		</xsl:when>\r\n		<xsl:otherwise>\r\n			<xsl:value-of select=\"$encounterTimestamp\" />\r\n		</xsl:otherwise>\r\n	</xsl:choose>\r\n	<xsl:text>&#x000d;</xsl:text>\r\n</xsl:template>\r\n\r\n<!-- Generate HL7-formatted timestamp -->\r\n<xsl:template name=\"hl7Timestamp\">\r\n	<xsl:param name=\"date\" />\r\n	<xsl:if test=\"string($date) != \'\'\">\r\n		<xsl:value-of select=\"concat(year-from-dateTime($date),format-number(month-from-dateTime($date),\'00\'),format-number(day-from-dateTime($date),\'00\'),format-number(hours-from-dateTime($date),\'00\'),format-number(minutes-from-dateTime($date),\'00\'),format-number(floor(seconds-from-dateTime($date)),\'00\'))\" />\r\n	</xsl:if>\r\n</xsl:template>\r\n\r\n<!-- Generate HL7-formatted date -->\r\n<xsl:template name=\"hl7Date\">\r\n	<xsl:param name=\"date\" />\r\n	<xsl:if test=\"string($date) != \'\'\">\r\n		<xsl:choose>\r\n			<xsl:when test=\"contains(string($date),\'T\')\">\r\n				<xsl:call-template name=\"hl7Date\">\r\n					<xsl:with-param name=\"date\" select=\"xs:date(substring-before($date,\'T\'))\" />\r\n				</xsl:call-template>\r\n			</xsl:when>\r\n			<xsl:otherwise>\r\n					<xsl:value-of select=\"concat(year-from-date($date),format-number(month-from-date($date),\'00\'),format-number(day-from-date($date),\'00\'))\" />\r\n			</xsl:otherwise>\r\n		</xsl:choose>				\r\n	</xsl:if>\r\n</xsl:template>\r\n\r\n<!-- Generate HL7-formatted time -->\r\n<xsl:template name=\"hl7Time\">\r\n	<xsl:param name=\"time\" />\r\n	<xsl:if test=\"$time != \'\'\">\r\n		<xsl:value-of select=\"concat(format-number(hours-from-time($time),\'00\'),format-number(minutes-from-time($time),\'00\'),format-number(floor(seconds-from-time($time)),\'00\'))\" />\r\n	</xsl:if>\r\n</xsl:template>\r\n\r\n</xsl:stylesheet>',271,'2008-11-14 13:46:09',271,'2018-10-08 12:48:36',0,NULL,NULL,NULL,'e28b6096-1d5f-11e0-b929-000c29ad1d07');
/*!40000 ALTER TABLE `form` ENABLE KEYS */;
UNLOCK TABLES;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2019-08-30 15:55:40
